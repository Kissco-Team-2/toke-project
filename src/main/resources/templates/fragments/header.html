<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:fragment="site-head">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link rel="stylesheet" href="/css/style.css">
<title th:text="${title} ?: 'TOKE'">TOKE</title>
<style>
.dropdown-item {
	margin-top: 10px;
	margin-bottom: 10px;
	text-align: center;
}
</style>
</head>

<body>
	<header th:fragment="site-header">
		<nav
			class="navbar navbar-expand-lg navbar-light bg-white border-bottom px-4">
			<div class="container-fluid">
				<a class="navbar-brand fw-bold" href="/">TOKE</a>

				<div class="collapse navbar-collapse">
					<ul class="navbar-nav ms-auto mb-2 mb-lg-0">
						<li class="nav-item dropdown"><a
							class="nav-link dropdown-toggle" href="#" id="navbarDropdown"
							role="button" data-bs-toggle="dropdown" aria-expanded="false">단어장</a>
							<ul class="dropdown-menu" aria-label="navbarDropdown">
								<li><a class="dropdown-item" th:href="@{/lists}">모두의
										단어장</a></li>
								<li><a class="dropdown-item" th:href="@{/lists/mine}">내
										단어장</a></li>
							</ul></li>


						<li class="nav-item dropdown"><a
							class="nav-link dropdown-toggle" href="#" id="navbarDropdown"
							role="button" data-bs-toggle="dropdown" aria-expanded="false">일본어
								표현</a>
							<ul class="dropdown-menu" aria-label="navbarDropdown">
								<li><a class="dropdown-item"
									th:href="@{/words(mode='ko', q=${q}, category=${category})}">가나다순</a></li>
								<li><a class="dropdown-item"
									th:href="@{/words(mode='ja', q=${q}, category=${category})}">히라가나순</a></li>
								<li><a class="dropdown-item"
									th:href="@{/words(mode='cat', q=${q}, category=${category})}">카테고리별</a></li>
								<li><a class="dropdown-item"
									th:href="@{/words(mode='recent', q=${q}, category=${category})}">최근
										등록순</a></li>
							</ul></li>
						<li class="nav-item"><a class="nav-link"
							href="/quiz/category">퀴즈</a></li>
						<li class="nav-item" sec:authorize="isAuthenticated()"><a
							class="nav-link" href="/wrong-notes">오답노트</a></li>
						<li class="nav-item"><a class="nav-link" href="/qna">문의</a></li>
						<li class="nav-item" sec:authorize="isAuthenticated()"><a
							class="nav-link" href="#">마이페이지</a></li>
						<!-- 관리자일 때 -->
						<li class="nav-item" sec:authorize="hasRole('ROLE_ADMIN')"><a
							class="nav-link fw-bold" style="color: blue;">관리자</a></li>

						<!-- 일반 로그인 사용자일 때 (관리자는 위에서 처리되므로 여기선 일반 사용자만) -->
						<li class="nav-item"
							sec:authorize="isAuthenticated() and !hasRole('ROLE_ADMIN')"><a
							class="nav-link fw-bold" style="color: blue;"
							th:text="${@currentUserAccessor.nickname != null ? @currentUserAccessor.nickname + '님' : #authentication.name + '님'}">
								사용자님 </a></li>
					</ul>
					<div class="d-flex ms-3">
						<div sec:authorize="isAnonymous()">
							<a href="/login" class="btn btn-outline-secondary btn-sm me-2">로그인</a>
							<a href="/register" class="btn btn-dark btn-sm">회원가입</a>
						</div>
						<div sec:authorize="isAuthenticated()">
							<form th:action="@{/logout}" method="post" class="d-inline">
								<button type="submit" class="btn btn-outline-secondary btn-sm">로그아웃</button>
							</form>
						</div>
					</div>
				</div>
		</nav>
	</header>
</body>
</html>
