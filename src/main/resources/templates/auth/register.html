<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>회원가입</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link rel="stylesheet" href="/css/style.css">

<style>
body {
	background: #f7f7f7;
}

.card-soft {
	border: 0;
	border-radius: 12px;
	background: #fff;
	box-shadow: 0 10px 24px rgba(0, 0, 0, .06);
}

.card-body {
	padding: 48px 40px;
}

.form-label {
	font-weight: 600;
	color: #333;
}

.req::after {
	content: " *";
	color: #ff5a5a;
}

.form-control {
	border-radius: 8px;
}

.btn-soft-green {
	background: #caf7cf;
	color: #000;
	border: 0;
	font-weight: 600;
}

.btn-soft-green:hover {
	background: #bfe3ce;
	color: #0f5132;
}

.btn-black {
	background: #000;
	color: #fff;
	border: 0;
	font-weight: 600;
}

.btn-black:hover {
	background: #111;
	color: #fff;
}

.form-control::placeholder {
	color: #dddddd;
	opacity: 1;
	font-size: 0.8rem;
	opacity: 1;
}
</style>
</head>
<body class="d-flex flex-column min-vh-100">
	<main class="flex-grow-1">
		<div class="container p-5">
			<div class="row justify-content-center">
				<div class="card card-soft"
					style="width: 720px; height: 650px; padding: 24px;">
					<div class="card-body">
						<h2 class="text-center fw-bold">회원가입</h2>
						<div style="padding: 20px;">
							<p class="mb-4 text-muted" style="font-size: 0.8rem;">회원 정보를
								입력해 주세요</p>
							<form class="mt-3" action="/register" method="post">
								<div class="row mb-4 align-items-center">
									<label for="name" class="col-sm-3 col-form-label req">이름</label>
									<div class="col-sm-9">
										<input type="text" id="name" name="username"
											class="form-control" placeholder="이름 입력">
									</div>
								</div>

								<!-- 이메일 -->
								<div class="row mb-4 align-items-center">
									<!-- 라벨 -->
									<label for="email" class="col-sm-3 col-form-label req">이메일</label>

									<!-- 아이디 + @ + 도메인 -->
									<div class="col-sm-9 d-flex align-items-center gap-2">
										<input type="text" id="emailId" class="form-control w-50"
											placeholder="example" aria-label="email-id"> <span
											class="text-muted">@</span>
										<!-- select -->
										<select id="emailDomain" class="form-select w-50"
											aria-label="email-domain" style="font-size: 0.875rem;">
											<option value="naver.com" selected>naver.com</option>
											<option value="gmail.com">gmail.com</option>
											<option value="hanmail.net">hanmail.net</option>
											<option value="kakao.com">kakao.com</option>
											<option value="custom">직접 입력</option>
										</select>

										<!-- 직접 입력칸 (처음엔 숨김) -->
										<input type="text" id="customDomain"
											class="form-control w-50 d-none" placeholder="직접 입력">
										<input type="hidden" id="email" name="email">
									</div>
								</div>

								<script>
							const emailId = document.getElementById("emailId");
  							const emailDomain = document.getElementById("emailDomain");
 							const customDomain = document.getElementById("customDomain");
  							const email = document.getElementById("email"); // hidden input

							  function updateEmail() {
							    let domain = emailDomain.value;
							    if (domain === "custom") {
							      domain = customDomain.value;
							    }
							    if (emailId.value && domain) {
							      email.value = emailId.value + "@" + domain;
							    } else {
							      email.value = "";
							    }
							  }
							
							  emailId.addEventListener("input", updateEmail);
							  emailDomain.addEventListener("change", () => {
							    if (emailDomain.value === "custom") {
							      emailDomain.classList.add("d-none");
							      customDomain.classList.remove("d-none");
							      customDomain.focus();
							    }
							    updateEmail();
							  });
							  customDomain.addEventListener("input", updateEmail);
							
							  customDomain.addEventListener("blur", function () {
							    if (this.value === "") {
							      customDomain.classList.add("d-none");
							      emailDomain.classList.remove("d-none");
							      emailDomain.value = "";
							    }
							    updateEmail();
							  });
								</script>


								<!-- 비밀번호 -->
								<div class="row mb-4 align-items-center">
									<label for="password" class="col-sm-3 col-form-label req">비밀번호</label>
									<div class="col-sm-9">
										<input type="password" id="password" name="password"
											class="form-control"
											placeholder="비밀번호 입력(영어, 숫자 조합 포함 10자 이상)">
									</div>
								</div>

								<!-- 비밀번호 확인 -->
								<div class="row mb-4 align-items-center">
									<label for="confirmPassword"
										class="col-sm-3 col-form-label req">비밀번호 확인</label>
									<div class="col-sm-9">
										<input type="password" id="confirmPassword"
											name="confirmPassword" class="form-control"
											placeholder="비밀번호 입력(영어, 숫자 조합 포함 10자 이상)">
									</div>
								</div>

								<!-- 별명 -->
								<div class="row mb-4 align-items-center">
									<label for="nickname" class="col-sm-3 col-form-label req">별명</label>
									<div class="col-sm-9">
										<input type="text" id="nickname" name="nickname"
											class="form-control"
											placeholder="별명 입력(한글, 영어, 숫자 조합 포함 6자 이내)">
									</div>
								</div>

								<!-- 버튼 -->
								<div class="row g-3" style="margin-top: 1.8rem;">
									<div class="col-12 col-md-6 d-grid">
										<button type="submit" class="btn btn-soft-green py-2">회원가입</button>
									</div>
									<div class="col-12 col-md-6 d-grid">
										<button type="button" class="btn btn-black py-2">취소</button>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</main>

	<footer th:replace="fragments/footer :: site-footer"></footer>

	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
